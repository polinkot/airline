Привет.
Сделала domain для авиакомпании. Присылаю на ревью. Правда, не сделала отдельную ветку для кода. Всё уже в main.
Сразу добавила usecase, persistence, web. Они пока пустые.

Модуль leasing - контекст лизинг.
Модуль flight - управление рейсами.
Модуль maintenance - ТО.

Вопросы:

Выбирала как поместить в агрегат вложенные сущности. Например - самолёт для рейса.
class Flight internal constructor(
        id: FlightId,
        val aircraftId: AircraftId
        ...
)
В виде объектов? Или айдишек?
Решила, что всё-таки лучше айдишки, ведь у нас может и не быть хибернейта, кэшей.
И если всегда собирать агрегат со всеми вложенными объектами, то получится нагрузка на память и потеря производительности.
А эти объекты могут и не понадобиться совсем. Мы сможем доставать их из хранилища целиком потом, когда потребуются.
Как всё-таки лучше делать?

Не разобралась - когда использовать DomainEntity, когда агрегат?
Если есть вложенные сущности, которые должны сохраняться только вместе с содержащим их объектом - то агрегат?
Например - айтемы у заказа.
А если вложенные могут сохраняться отдельно? Тогда DomainEntity? Или тоже агрегат?
Например - самолёт у рейса. Их ведь не нужно сохранять в одной транзакции.